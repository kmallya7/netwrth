/* src/input.css */
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer components {

  /* ── Sidebar Nav Links ────────────────────────────────────────────────── */
  .nav-link {
    @apply flex items-center gap-2.5 px-3 py-2 rounded-lg text-sm text-neutral-400
           hover:text-neutral-100 hover:bg-neutral-800 cursor-pointer relative;
  }
  .nav-link.active {
    @apply text-emerald-100;
    background-color: rgba(16, 185, 129, 0.09);
  }
  .nav-icon {
    @apply flex items-center justify-center w-5 h-5 shrink-0;
  }
  .nav-icon svg {
    display: block;
  }
  .nav-link.active .nav-icon {
    @apply text-emerald-400;
  }

  /* ── Sidebar Toggle Button ──────────────────────────────────────────────── */
  .sidebar-toggle-btn {
    @apply flex items-center justify-center w-6 h-6 rounded-md
           text-neutral-500 hover:text-neutral-100 hover:bg-neutral-800 transition-colors;
    flex-shrink: 0;
  }

  /* ── Cards ────────────────────────────────────────────────────────────── */
  .card {
    @apply bg-neutral-900 border border-neutral-800 rounded-2xl p-4;
  }
  .card-title {
    @apply text-sm font-semibold text-neutral-300;
  }

  /* ── Stat Cards ───────────────────────────────────────────────────────── */
  .stat-card {
    @apply card space-y-1;
  }
  .stat-label {
    @apply text-xs text-neutral-500 font-medium uppercase tracking-wide;
  }
  .stat-value {
    @apply text-2xl font-mono font-semibold;
  }
  .stat-delta {
    @apply text-xs text-neutral-500;
  }
  .stat-delta.positive { @apply text-emerald-500; }
  .stat-delta.negative { @apply text-red-400; }

  /* ── Buttons ──────────────────────────────────────────────────────────── */
  .btn-primary {
    @apply px-4 py-2 rounded-lg bg-emerald-500 hover:bg-emerald-400
           text-neutral-950 text-sm font-semibold transition;
  }
  .btn-secondary {
    @apply px-4 py-2 rounded-lg bg-neutral-800 hover:bg-neutral-700
           text-neutral-200 text-sm font-medium transition border border-neutral-700;
  }

  /* ── Form Elements ────────────────────────────────────────────────────── */
  .form-group { @apply flex flex-col gap-1.5; }
  .form-label { @apply text-xs font-medium text-neutral-400; }
  .form-input {
    @apply w-full px-3 py-2 rounded-lg bg-neutral-800 border border-neutral-700
           text-sm text-neutral-100 placeholder-neutral-600
           focus:outline-none focus:ring-1 focus:ring-emerald-500 transition;
  }
  .select-input {
    @apply px-3 py-2 rounded-lg bg-neutral-800 border border-neutral-700
           text-sm text-neutral-300 focus:outline-none focus:ring-1 focus:ring-emerald-500 transition;
  }

  /* ── Modals ───────────────────────────────────────────────────────────── */
  .modal-overlay {
    @apply fixed inset-0 z-40 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4;
  }
  .modal-box {
    @apply w-full max-w-md bg-neutral-900 border border-neutral-800 rounded-2xl shadow-2xl;
  }
  .modal-header {
    @apply flex items-center justify-between px-5 py-4 border-b border-neutral-800;
  }
  .modal-title {
    @apply text-base font-semibold;
  }
  .modal-close {
    @apply text-neutral-500 hover:text-neutral-100 transition text-sm;
  }
  .modal-body {
    @apply px-5 py-4;
  }
  .modal-footer {
    @apply flex justify-end gap-3 pt-2;
  }

  /* ── Tables ───────────────────────────────────────────────────────────── */
  .table-row {
    @apply border-b border-neutral-800/50 hover:bg-neutral-800/30 transition;
  }

  /* ── Badges ───────────────────────────────────────────────────────────── */
  .category-badge {
    @apply inline-block px-2 py-0.5 rounded-md bg-neutral-800 text-neutral-400 text-xs;
  }

  /* ── Manage Items (accounts / categories list rows) ──────────────────── */
  .manage-item {
    @apply flex items-center justify-between gap-3 px-3 py-2.5 rounded-lg
           hover:bg-neutral-800/50 transition-colors cursor-default;
  }
  .manage-badge {
    @apply inline-block px-2 py-0.5 rounded bg-neutral-800 text-neutral-500 text-xs;
  }

  /* ── Tab Buttons ──────────────────────────────────────────────────────── */
  .tab-btn {
    @apply py-2 rounded-lg text-sm font-medium text-neutral-400 bg-neutral-800
           hover:text-neutral-100 transition;
  }
  .tab-btn.active {
    @apply text-neutral-950 bg-emerald-500;
  }
}

/* ═══════════════════════════════════════════════════════════════════════════
   SIDEBAR COLLAPSE SYSTEM
   ═══════════════════════════════════════════════════════════════════════════ */

/* Sidebar width transition */
#sidebar {
  width: 15rem;
  overflow-x: hidden; /* prevent horizontal scrollbar during collapse transition */
  transition: width 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}
#sidebar.collapsed {
  width: 4.5rem;
}

/* Active indicator bar (left accent) */
.nav-link.active::before {
  content: '';
  position: absolute;
  left: 0;
  top: 20%;
  height: 60%;
  width: 3px;
  background: #10b981;
  border-radius: 0 999px 999px 0;
  transition: opacity 0.2s ease;
}
#sidebar.collapsed .nav-link.active::before {
  opacity: 0;
}

/* Nav link transitions & hover lift */
.nav-link {
  transition: background-color 0.15s ease, color 0.15s ease,
              padding 0.3s cubic-bezier(0.4, 0, 0.2, 1),
              gap 0.3s cubic-bezier(0.4, 0, 0.2, 1),
              transform 0.15s ease;
}
.nav-link:hover:not(.active) {
  transform: translateX(2px);
}
#sidebar.collapsed .nav-link {
  gap: 0; /* collapse icon-label gap smoothly via transition */
}
#sidebar.collapsed .nav-link:hover {
  transform: none;
}

/* Nav label text — fades & collapses width */
.nav-label {
  overflow: hidden;
  white-space: nowrap;
  max-width: 12rem;
  opacity: 1;
  transition: opacity 0.15s ease, max-width 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}
#sidebar.collapsed .nav-label {
  opacity: 0;
  max-width: 0;
  pointer-events: none;
}

/* Nav section group headings */
.nav-section-label {
  overflow: hidden;
  white-space: nowrap;
  max-height: 3rem;
  opacity: 1;
  transition: opacity 0.15s ease,
              max-height 0.3s cubic-bezier(0.4, 0, 0.2, 1),
              padding-top 0.3s cubic-bezier(0.4, 0, 0.2, 1),
              padding-bottom 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}
#sidebar.collapsed .nav-section-label {
  opacity: 0;
  max-height: 0;
  padding-top: 0 !important;
  padding-bottom: 0 !important;
  pointer-events: none;
}

/* Sidebar brand (logo text + version) */
.sidebar-brand {
  display: flex;
  align-items: center;
  overflow: hidden;
  max-width: 12rem;
  margin-left: 0.625rem; /* gap between logo img and brand text */
  opacity: 1;
  transition: opacity 0.15s ease,
              max-width 0.3s cubic-bezier(0.4, 0, 0.2, 1),
              margin-left 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}
#sidebar.collapsed .sidebar-brand {
  opacity: 0;
  max-width: 0;
  margin-left: 0; /* collapse the gap so toggle stays visible */
  pointer-events: none;
}

/* Sidebar header padding adjustment when collapsed */
#sidebar.collapsed #sidebarHeader {
  padding-left: 0.5rem;
  padding-right: 0.5rem;
}

/* User info text block */
.user-info {
  flex: 1;
  min-width: 0;
  overflow: hidden;
  max-width: 12rem;
  opacity: 1;
  transition: opacity 0.15s ease, max-width 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}
#sidebar.collapsed .user-info {
  opacity: 0;
  max-width: 0;
  pointer-events: none;
}

/* Sign-out button */
.user-signout {
  flex-shrink: 0;
  overflow: hidden;
  max-width: 2rem;
  opacity: 1;
  transition: opacity 0.15s ease, max-width 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}
#sidebar.collapsed .user-signout {
  opacity: 0;
  max-width: 0;
  pointer-events: none;
}

/* Collapsed user profile padding */
#sidebar.collapsed #userProfile {
  padding-left: 0.75rem;
  padding-right: 0.75rem;
}

/* Toggle chevron rotation */
.sidebar-toggle-icon {
  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}
#sidebar.collapsed .sidebar-toggle-icon {
  transform: rotate(180deg);
}

/* ═══════════════════════════════════════════════════════════════════════════
   MODAL ANIMATIONS
   ═══════════════════════════════════════════════════════════════════════════ */

@keyframes modalOverlayIn {
  from { opacity: 0; }
  to   { opacity: 1; }
}
@keyframes modalBoxIn {
  from { opacity: 0; transform: scale(0.94) translateY(-10px); }
  to   { opacity: 1; transform: scale(1)    translateY(0); }
}
@keyframes modalOverlayOut {
  from { opacity: 1; }
  to   { opacity: 0; }
}
@keyframes modalBoxOut {
  from { opacity: 1; transform: scale(1)    translateY(0); }
  to   { opacity: 0; transform: scale(0.96) translateY(-6px); }
}

.modal-overlay.is-opening {
  animation: modalOverlayIn 0.2s ease forwards;
}
.modal-overlay.is-opening .modal-box {
  animation: modalBoxIn 0.25s cubic-bezier(0.34, 1.25, 0.64, 1) forwards;
}
.modal-overlay.is-closing {
  animation: modalOverlayOut 0.18s ease forwards;
  pointer-events: none;
}
.modal-overlay.is-closing .modal-box {
  animation: modalBoxOut 0.16s ease forwards;
}

/* ═══════════════════════════════════════════════════════════════════════════
   THEME TRANSITIONS — smooth color switching across all elements
   ═══════════════════════════════════════════════════════════════════════════ */
/* #sidebar and .nav-link intentionally excluded — they own their transitions
   in the Sidebar Collapse System block above to avoid cascade conflicts */
body, aside, header, main,
.card, .stat-card, .modal-box, .modal-header,
.form-input, .select-input, .btn-secondary,
.tab-btn, .category-badge {
  transition: background-color 0.25s ease, border-color 0.25s ease,
              color 0.25s ease, box-shadow 0.25s ease;
}

/* ═══════════════════════════════════════════════════════════════════════════
   PREMIUM STAT CARD — visible border + lift + shimmer on hover
   ═══════════════════════════════════════════════════════════════════════════ */
.stat-card {
  position: relative;
  border-color: rgba(255, 255, 255, 0.08);
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.04);
  transition: transform 0.22s cubic-bezier(0.34, 1.2, 0.64, 1),
              box-shadow 0.22s ease, border-color 0.22s ease,
              background-color 0.22s ease;
}
/* Emerald shimmer line at top — fades in on hover */
.stat-card::before {
  content: '';
  position: absolute;
  top: 0; left: 0; right: 0;
  height: 1px;
  background: linear-gradient(90deg,
    transparent 10%, rgba(16, 185, 129, 0.4) 50%, transparent 90%);
  opacity: 0;
  transition: opacity 0.22s ease;
  pointer-events: none;
  border-radius: 16px 16px 0 0;
}
.stat-card:hover {
  transform: translateY(-4px);
  box-shadow: 0 14px 36px rgba(0, 0, 0, 0.45),
              0 0 0 1px rgba(16, 185, 129, 0.12),
              inset 0 1px 0 rgba(255, 255, 255, 0.07);
  border-color: rgba(255, 255, 255, 0.14);
  background-color: #1e1e1e;
}
.stat-card:hover::before {
  opacity: 1;
}

/* ── Content cards (recent tx, budget overview) — subtle lift ──────────── */
.card {
  border-color: rgba(255, 255, 255, 0.07);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.25);
  transition: transform 0.2s cubic-bezier(0.34, 1.2, 0.64, 1),
              box-shadow 0.2s ease, border-color 0.2s ease;
}
.card:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 28px rgba(0, 0, 0, 0.35);
  border-color: rgba(255, 255, 255, 0.11);
}

/* ═══════════════════════════════════════════════════════════════════════════
   TRANSACTION ROW ANIMATIONS
   ═══════════════════════════════════════════════════════════════════════════ */
@keyframes txRowIn {
  from { opacity: 0; transform: translateX(-6px); }
  to   { opacity: 1; transform: translateX(0); }
}
.tx-row {
  animation: txRowIn 0.22s ease both;
  border-radius: 8px;
  padding: 0.375rem 0.25rem;
  transition: background-color 0.15s ease;
}
.tx-row:hover {
  background-color: rgba(255, 255, 255, 0.04);
}
.tx-amount {
  transition: transform 0.15s ease;
}
.tx-row:hover .tx-amount {
  transform: translateX(2px);
}

/* ═══════════════════════════════════════════════════════════════════════════
   BUDGET OVERVIEW ANIMATIONS
   ═══════════════════════════════════════════════════════════════════════════ */
@keyframes barGrow {
  from { transform: scaleX(0); }
  to   { transform: scaleX(1); }
}
.budget-bar {
  transform-origin: left center;
  animation: barGrow 0.65s cubic-bezier(0.4, 0, 0.2, 1) both;
}
.budget-bar-track {
  overflow: hidden;
}
.budget-overview-row {
  padding: 3px 4px;
  border-radius: 6px;
  transition: background-color 0.15s ease;
}
.budget-overview-row:hover {
  background-color: rgba(255, 255, 255, 0.04);
}

/* ═══════════════════════════════════════════════════════════════════════════
   LIGHT MODE OVERRIDES
   When html.dark class is removed, all UI adapts to a clean light theme.
   ═══════════════════════════════════════════════════════════════════════════ */

/* Body & layout */
html:not(.dark) body             { background-color: #f4f4f5; color: #18181b; }
html:not(.dark) main             { background-color: #f4f4f5; }
html:not(.dark) #pageTitle       { color: #18181b; }
html:not(.dark) #pageSubtitle    { color: #71717a; }

/* Top bar */
html:not(.dark) #appShell > main > header {
  background-color: rgba(244, 244, 245, 0.88);
  border-bottom-color: #e4e4e7;
  color: #18181b;
}

/* Sidebar */
html:not(.dark) #sidebar             { background-color: #ffffff; border-right-color: #e4e4e7; }
html:not(.dark) #sidebarHeader       { border-bottom-color: #e4e4e7; }
html:not(.dark) #userProfile         { border-top-color: #e4e4e7; }
html:not(.dark) #userName            { color: #18181b; }
html:not(.dark) #userEmail           { color: #71717a; }
html:not(.dark) #signOutBtn          { color: #a1a1aa; }
html:not(.dark) #signOutBtn:hover    { color: #ef4444; }
html:not(.dark) .sidebar-toggle-btn         { color: #a1a1aa; }
html:not(.dark) .sidebar-toggle-btn:hover  { color: #18181b; background-color: #e4e4e7; }
html:not(.dark) .nav-section-label          { color: #a1a1aa; }

/* Nav links */
html:not(.dark) .nav-link                    { color: #52525b; }
html:not(.dark) .nav-link:hover:not(.active) { color: #18181b; background-color: #ececed; }
html:not(.dark) .nav-link.active             { color: #065f46; background-color: rgba(16,185,129,0.1); }
html:not(.dark) .nav-link.active .nav-icon   { color: #059669; }
html:not(.dark) .nav-link.active::before     { background: #059669; }

/* Cards */
html:not(.dark) .card {
  background-color: #ffffff;
  border-color: #e4e4e7;
  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.06), 0 0 0 1px rgba(0,0,0,0.02);
}
html:not(.dark) .card:hover {
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
  border-color: #d4d4d8;
}
html:not(.dark) .stat-card {
  background-color: #ffffff;
  border-color: #e4e4e7;
  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.06);
}
html:not(.dark) .stat-card:hover {
  background-color: #fafafa;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1), 0 0 0 1px rgba(16, 185, 129, 0.2);
  border-color: #d4d4d8;
}
html:not(.dark) .stat-card::before {
  background: linear-gradient(90deg,
    transparent 10%, rgba(16, 185, 129, 0.25) 50%, transparent 90%);
}
html:not(.dark) .card-title  { color: #3f3f46; }
html:not(.dark) .stat-label  { color: #71717a; }
html:not(.dark) .stat-value  { color: #18181b; }
html:not(.dark) .stat-delta  { color: #a1a1aa; }
html:not(.dark) .stat-delta.positive { color: #059669; }
html:not(.dark) .stat-delta.negative { color: #dc2626; }

/* Form elements */
html:not(.dark) .form-input              { background-color: #ffffff; border-color: #d4d4d8; color: #18181b; }
html:not(.dark) .form-input::placeholder { color: #a1a1aa; }
html:not(.dark) .form-label              { color: #52525b; }
html:not(.dark) .select-input            { background-color: #ffffff; border-color: #d4d4d8; color: #3f3f46; }

/* Buttons */
html:not(.dark) .btn-primary          { background-color: #10b981; color: #ffffff; }
html:not(.dark) .btn-primary:hover    { background-color: #059669; }
html:not(.dark) .btn-secondary        { background-color: #f4f4f5; border-color: #d4d4d8; color: #3f3f46; }
html:not(.dark) .btn-secondary:hover  { background-color: #e8e8e9; }
html:not(.dark) #quickAddBtn          { background-color: #10b981; color: #ffffff; }
html:not(.dark) #quickAddBtn:hover    { background-color: #059669; }
html:not(.dark) #darkModeToggle       { color: #71717a; }
html:not(.dark) #darkModeToggle:hover { color: #18181b; }

/* Modal */
html:not(.dark) .modal-overlay         { background-color: rgba(0, 0, 0, 0.2); }
html:not(.dark) .modal-box             { background-color: #ffffff; border-color: #e4e4e7; box-shadow: 0 20px 60px rgba(0,0,0,0.12); }
html:not(.dark) .modal-header          { border-bottom-color: #e4e4e7; }
html:not(.dark) .modal-title           { color: #18181b; }
html:not(.dark) .modal-close           { color: #a1a1aa; }
html:not(.dark) .modal-close:hover     { color: #18181b; }

/* Tab buttons */
html:not(.dark) .tab-btn              { background-color: #ececed; color: #71717a; }
html:not(.dark) .tab-btn:hover        { color: #18181b; }
html:not(.dark) .tab-btn.active       { background-color: #10b981; color: #ffffff; }

/* Quick-add tab container bg */
html:not(.dark) .grid.rounded-lg.bg-neutral-800 { background-color: #e4e4e7; }

/* Category badge & toast */
html:not(.dark) .category-badge        { background-color: #f0f0f1; color: #52525b; }
html:not(.dark) #toast > div           { background-color: #ffffff; border-color: #e4e4e7; color: #18181b; box-shadow: 0 4px 20px rgba(0,0,0,0.1); }

/* Auth screen */
html:not(.dark) #authScreen       { background-color: #f4f4f5; }
html:not(.dark) #authScreen > div { background-color: #ffffff; border-color: #e4e4e7; }

/* Transaction & budget row hover in light mode */
html:not(.dark) .tx-row:hover              { background-color: rgba(0, 0, 0, 0.03); }
html:not(.dark) .budget-overview-row:hover { background-color: rgba(0, 0, 0, 0.03); }

/* Manage items in light mode */
html:not(.dark) .manage-item:hover { background-color: rgba(0, 0, 0, 0.04); }
html:not(.dark) .manage-badge      { background-color: #f0f0f1; color: #71717a; }

/* Budget bar track in light mode */
html:not(.dark) .budget-bar-track        { background-color: #e8e8ea; }

/* Table row hover in light mode */
html:not(.dark) .table-row:hover                  { background-color: rgba(0, 0, 0, 0.025); }
html:not(.dark) .hover\:bg-neutral-800\/30:hover  { background-color: rgba(0, 0, 0, 0.025) !important; }

/* Utility color overrides for JS-rendered HTML */
html:not(.dark) .text-neutral-100  { color: #18181b !important; }
html:not(.dark) .text-neutral-300  { color: #3f3f46 !important; }
html:not(.dark) .text-neutral-400  { color: #52525b !important; }
html:not(.dark) .text-neutral-500  { color: #71717a !important; }
html:not(.dark) .text-neutral-600  { color: #a1a1aa !important; }

/* Background utility overrides */
html:not(.dark) .bg-neutral-950  { background-color: #f4f4f5 !important; }
html:not(.dark) .bg-neutral-900  { background-color: #ffffff !important; }
html:not(.dark) .bg-neutral-800  { background-color: #ececed !important; }

/* Border utility overrides */
html:not(.dark) .border-neutral-800      { border-color: #e4e4e7 !important; }
html:not(.dark) .border-neutral-800\/50  { border-color: rgba(228,228,231,0.7) !important; }
html:not(.dark) .border-neutral-800\/60  { border-color: rgba(228,228,231,0.8) !important; }
html:not(.dark) .border-neutral-700      { border-color: #d4d4d8 !important; }

/* Red/green amounts in light mode (slightly more saturated) */
html:not(.dark) .text-red-400     { color: #dc2626 !important; }
html:not(.dark) .text-emerald-400 { color: #059669 !important; }
html:not(.dark) .text-emerald-500 { color: #059669 !important; }

/* ═══════════════════════════════════════════════════════════════════════════
   ACTION BUTTONS — edit (✎) and delete (✕) reveal on row/card hover
   ═══════════════════════════════════════════════════════════════════════════ */
.action-btn {
  opacity: 0;
  font-size: 13px;
  padding: 3px 5px;
  border-radius: 4px;
  line-height: 1;
  cursor: pointer;
  transition: opacity 0.15s ease, color 0.15s ease,
              background-color 0.15s ease, transform 0.12s ease;
}
.table-row:hover .action-btn,
.card:hover .action-btn {
  opacity: 1;
}
.edit-btn { color: #737373; }
.edit-btn:hover {
  color: #10b981;
  background-color: rgba(16, 185, 129, 0.12);
  transform: scale(1.1);
}
.delete-btn { color: #737373; }
.delete-btn:hover {
  color: #f87171;
  background-color: rgba(248, 113, 113, 0.1);
}
/* Two-click confirm state */
.delete-btn.confirming {
  opacity: 1 !important;
  color: #ef4444 !important;
  background-color: rgba(239, 68, 68, 0.12);
  padding: 3px 8px;
  font-size: 11px;
  font-weight: 500;
}

/* Light mode */
html:not(.dark) .edit-btn              { color: #a1a1aa; }
html:not(.dark) .edit-btn:hover        { color: #059669; background-color: rgba(5,150,105,0.08); }
html:not(.dark) .delete-btn            { color: #a1a1aa; }
html:not(.dark) .delete-btn:hover      { color: #dc2626; background-color: rgba(220,38,38,0.07); }
html:not(.dark) .delete-btn.confirming { color: #dc2626 !important; background-color: rgba(220,38,38,0.08); }
